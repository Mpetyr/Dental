<% 
	function arrayColumn(array, columnName) {
	    return array.map(function(value,index) {
	        return value[columnName];
	    })
	}
	var uniqueArray = function(arrArg) {
	  return arrArg.filter(function(elem, pos,arr) {
	    return arr.indexOf(elem) == pos;
	  });
	};
	var horas = arrayColumn(by_hour, 'start_hour');
	horas = uniqueArray(horas);
	
	horasArray = {};
	horas.forEach(function(element) {
	  horasArray[element] = [];
	});

	by_hour.forEach(function(element) {
	  horasArray[element.start_hour].push(element);
	});

 %>
<div id="cal-day-box">
	<div class="row">
		<div class="col-md-12">
			<table class="table table-bordered">
				<thead>
					<tr>
						<th>Hora Inicio</th>
						<th>Hora Fin</th>
						<th>Paciente</th>
						<th>Telefono</th>
						<th>Doctor</th>
						<th>Estado Cita</th>
						<th>Opciones</th>
					</tr>
				</thead>
				<tbody>
					<% _.each(horasArray, function(e,i){ %>
						<% _.each(e, function(event,indice){  %>
					<tr>
						<td><%= event.inicio %></td>
						<td><%= event.fin %></td>
						<td><%= event.title %></td>
						<td><%= event.telefono %></td>
						<td><%= event.medico %></td>
						<td><%= event.estado %></td>
						<td></td>
					</tr>
						<% }); %>
					<% }); %>
				</tbody>
			</table>
		</div>
	</div>
</div>
